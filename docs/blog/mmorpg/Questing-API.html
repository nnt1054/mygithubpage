<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google" content="notranslate" />

  <title>Neil Toledo - Questing API</title>
  <meta name="description" content="Description:The Questing API is used to manage and store quest data, progress and completion for each Character.  We will be dividing different types of ques...">

  <link rel="icon" href="/assets/images/me.jpg">
  <link rel="shortcut icon" href="/assets/images/me.jpg">
  <link rel="apple-touch-icon" href="/assets/images/me.jpg">

  <link rel="stylesheet" href="/assets/css/rouge.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <!--<link href='https://fonts.googleapis.com/css?family=Lexend+Deca' rel='stylesheet'>-->
  <!--<link href='https://fonts.googleapis.com/css?family=Livvic' rel='stylesheet'>-->
  <!--<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet'>-->
  <!--<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>-->
  <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Comfortaa' rel='stylesheet'>
</head>

  <body>
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

<!--   <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Questing API</h1>
    <p class="post-meta"><time datetime="2020-06-08T00:00:00-07:00" itemprop="datePublished">Jun 8, 2020</time></p>
  </header> -->

    <link rel="stylesheet" href="/assets/css/documentation.css">

    <div id='top-nav-container'>

	<div id='nav-left'>
		<a href='/' class='img-container'> <img id="home-img" src="/assets/images/me.jpg"> </a>
		<h1> 2DMMORPG Documentation </h1>
	</div> 

	<div id='nav-right'>
		<a class="rect-btn" href="/portfolio"> <span>portfolio</span> </a>
		<a class="rect-btn" href="/blog/projects"> <span>blog</span> </a>
		<a class="rect-btn" href="/assets/images/resume.pdf"> <span>resume</span> </a>
	</div>

</div>

<style>

	#top-nav-container {
		display: flex;
		flex-direction: row;

		justify-content: space-between;

	 	max-width: 1280px;
		width: 80vw;

		position: absolute;
		margin: 0px auto;
		top: 32px;
		left: 0px;
		right: 0px;
	}

	#home-img {
		height: 64px;
		width: 64px;
		border-radius: 50%;
		border: 2px black solid;
	}

	#nav-left, #nav-right {
		display: flex;
		flex-direction: row;
	}

	#nav-left > * {
		margin-top: auto;
		margin-bottom: auto;
	}

	#nav-right > * {
		margin-top: auto;
		margin-bottom: auto;
	}

	#nav-left > h1 {
		margin-left: 12px;
		cursor: default;
	}

	.sm-link {
		font-size: 10pt;
		padding: 6px 8px;
	}

	.img-container {
		display: flex;
	}

	.rect-btn {
		width: 128px;
		margin-left: 10px;
		margin-right: 10px;
		border: 2px solid black;
		border-radius: 6px;
		background: white;
		box-shadow: 5px 5px;
		transform: translateY(-5px) translateX(-5px);
		cursor: pointer;
		height: 32px;
		display: flex;
		z-index: 10;
		color: black;
	}

	.rect-btn:hover {
		transition: 0.1s;
		box-shadow: 2px 2px;
		transform: translateY(-2px) translateX(-2px);
		text-decoration: none;
	}
	
	.rect-btn > * {
		margin: auto;
	}


@media (max-width: 1024px) {
	#top-nav-container {
		position: absolute;
	}

	#nav-right {
		display: none;
	}

}

</style>

    <div id="page-container">

        <div id="nav-container">
            <span> Pages </span>
            <ul class='nav-page-list'>
<!--                <a href="#"> • Project Overview </a>
                <a href="#"> • Process Documentation </a>
                <a href="#"> • CI/CD and Infrastructure </a>
                <span> Software Architecture </span>
                <ul class='nav-page-list'>
                    <a href="#"> • C4 Models </a>
                    <a href="#"> • Architecture Diagrams </a>
                    <a href="#"> • Flowchart Descriptions </a>
                    <a href="#"> • Game Engine Overview </a>
                </ul>
                <span> Notes </span>
                <ul class='nav-page-list'>
                    <a href="#"> • C4 Models for Software Architecture </a>
                    <a href="#"> • Helm Charts </a>
                </ul> -->

                

                

                

                <!-- get posts without parent -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <a href="/blog/mmorpg/mmorpg-project-overview"> • Project Overview </a>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <a href="/blog/mmorpg/General-Architecture"> • General Architecture </a>
                    
                

                <!-- get posts with parent tag -->
                
                    
                    

                    

                    
                    <span> Component Design Documents </span>
                    <ul class='nav-page-list'>
                    
                        
                    
                        
                            <a href="/blog/mmorpg/Game-Client"> • Game Client </a>
                        
                    
                        
                            <a href="/blog/mmorpg/Primary-Gateway-Server"> • Primary Gateway Server </a>
                        
                    
                        
                            <a href="/blog/mmorpg/Server-Manager"> • Server Manager </a>
                        
                    
                        
                            <a href="/blog/mmorpg/Game-Server-Instance"> • Game Server Instance </a>
                        
                    
                        
                            <a href="/blog/mmorpg/Social-Services-Server"> • Social API Server </a>
                        
                    
                        
                            <a href="/blog/mmorpg/Account-Data-API"> • Account Data API </a>
                        
                    
                        
                            <a href="/blog/mmorpg/Character-Data-API"> • Character Data API </a>
                        
                    
                        
                            <a href="/blog/mmorpg/Questing-API"> • Questing API </a>
                        
                    
                        
                            <a href="/blog/mmorpg/CDN-Asset-Server"> • CDN Asset Server </a>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    </ul>
                    

                
                    
                    

                    

                    
                    <span> Game Design Documents </span>
                    <ul class='nav-page-list'>
                    
                        
                            <a href="/blog/mmorpg/Game-Design-Overview"> • Game Design Overview </a>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    </ul>
                    

                
                    
                    

                    

                    
                    <span> CI/CD and Infrastructure </span>
                    <ul class='nav-page-list'>
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            <a href="/blog/mmorpg/CICD-Overview"> • Overview </a>
                        
                    
                        
                            <a href="/blog/mmorpg/Configuration-and-Setup"> • Configuration/Setup </a>
                        
                    
                        
                    
                        
                            <a href="/blog/mmorpg/Polling-Server"> • Polling Server </a>
                        
                    
                        
                            <a href="/blog/mmorpg/Helm-API"> • Helm API </a>
                        
                    
                        
                    
                        
                    
                        
                    
                    </ul>
                    

                


            </ul>
            
        </div>

        <div id="page-content" itemprop="articleBody">
            <header class="post-header">
                <h1 class="post-title" itemprop="name headline">Questing API</h1>
                <p class="post-meta"><time datetime="2020-06-08T00:00:00-07:00" itemprop="datePublished">Jun 8, 2020</time></p>
            </header>
            <h4 id="description">Description:</h4>
<p>The Questing API is used to manage and store quest data, progress and completion for each Character.  We will be dividing different types of quests into Main Story Quests(MSQ) and Side Quests.  MSQ will be a linear series of quests that denote either the ‘Main Story’ or ‘Class Story’ while Side Quests are generally nonlinear one-off quests.  Since MSQ is linear in terms of quest orders we only need to store the “current/next quest” and have each quest refernce the next one in a linked list sort of fashion.  Each Character needs to store a limited amount of MSQ progress (one for main story and one for each available class).  Since Side Quests will be optional to complete, we need to store an entry for a character and each of their completed side quests.  since we only need to store the “current” quest for each MSQ as opposed to a list/entry of all completed side quests, I’m currently planning on separting the two types into different databases accordingly.
The actual scripting and coding of actual Quest objects are however still TBD</p>

<h4 id="features">Features:</h4>
<ul>
  <li>responds to queries of a Character’s current MSQ progress for both the Main Story and all subsequent Class Stories</li>
  <li>responds to queries of all of a Character’s completed Side Quests in a specified area</li>
</ul>

<h4 id="tools">Tools:</h4>
<ul>
  <li>Express.js</li>
  <li>NoSQL (TBD)
    <ul>
      <li>was originally asssuming MySQL for side quests, but now I’m backtracking on that decision</li>
    </ul>
  </li>
</ul>

<h4 id="design-considerations">Design Considerations:</h4>
<ul>
  <li>I felt that creating this as a separate API was necessary since unlike the data stored in the Character Data API, the list of each Character’s completed quests should seldomly change and could grow to be an overly large list.  For these reasons, I would like to avoid storing run-on lists of completed quests in the Character’s NoSQL database and will store it separately in tentatively a normal SQL database.</li>
  <li>On-Going quest data however will be stored in the Character Data since those are necessary to track quest progress and are subject to changes more often.</li>
  <li>The main queries that the Questing API will be receiving are for a list of all quests completed by a Character given out in a specific area.
    <ul>
      <li>assuming this will be stored using NoSQL again, the query would look similar to: <code class="highlighter-rouge"><span class="p">{</span><span class="nt">"characterID"</span><span class="p">:</span><span class="w"> </span><span class="err">lambseel</span><span class="s2">", "</span><span class="err">area</span><span class="s2">": "</span><span class="err">area</span><span class="mi">01</span><span class="err">"</span><span class="p">}</span></code></li>
    </ul>
  </li>
  <li>The MSQ and Side Quests differentiation was necessary since we need to be able to track MSQ quests from anywhere in the in-game world, while Side Quests are only relevant to the area they’re assigned.  This way:
    <ul>
      <li>we can query only the necessary Side Quest completion entries as necessary (when a character enters a new area)</li>
      <li>and MSQ progress can be queried separately without requesting any overhead of unnecessary quest data.</li>
    </ul>
  </li>
</ul>

<h4 id="process-flowcharts">Process Flowcharts:</h4>

<h5 id="accepting-a-quest">Accepting a Quest:</h5>
<ul>
  <li>when a Game Server Instance is started, it requests all relevant Quest metadata from the Questing API</li>
  <li>when a Character connects to a Game Server Instance, the GSI requests the Character’s:
    <ul>
      <li>Player Data (which includes On-Going Quest Data)</li>
      <li>Story Quest Progress for Main Story and Class Stories
        <ul>
          <li>This is only done if the Character has just Logged In (and not just moving to a new area)</li>
        </ul>
      </li>
      <li>List of Character’s completed Side Quests in the current Area</li>
    </ul>
  </li>
  <li>The Game Server Instance sends all relevant Game Data to the Client</li>
  <li>When the Client loads in the map and NPC’s
    <ul>
      <li>each NPC will contain information for all of their available quests</li>
      <li>The Client will iterate through the NPC’s quests and check with their Side Quest progress to check if the NPC is offering any available/acceptable quests</li>
    </ul>
  </li>
  <li>In the Client Side:
    <ul>
      <li>The Character can walk up to the NPC or click on the NPC to open up the quest dialogue</li>
      <li>Clicking the “Accept Quest” button at the end of the dialogue sends an “Accept Quest” message to the Game Server Instance</li>
    </ul>
  </li>
  <li>The Game Server Instance sends an API request to the Questing API to update and verify that the character can accept the quest.</li>
  <li>The Game Server Instance responds back to the Client with an OK on accepting the quest
    <ul>
      <li>both the Game Server Instance and Client can then update their Character’s “On-Going Quests” Data field and recalculate the Status of NPC’s in the area.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

        </div>

    </div>
</article>
  </body>


  <script src="/assets/js/jquery-3.3.1.min.js"></script>
  <script src="/assets/js/main.js"></script>
  <link rel="stylesheet" href="/assets/css/mobile.css">
</html>